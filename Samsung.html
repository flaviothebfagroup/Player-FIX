<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover, user-scalable=no" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="default" />
  <meta name="theme-color" content="#F7941D" />
  <title>Samsung TV Signage Support</title>

  <!-- Phosphor Icons -->
  <script src="https://unpkg.com/phosphor-icons@1.4.2"></script>

  <style>
    :root{
      --orange:#F7941D; --orange-600:#e6831a; --orange-100:#FFF3E6;
      --gray-900:#0F0F0F; --gray-700:#2D2D2D; --gray-600:#4A4A4A; --gray-500:#6B6B6B;
      --gray-300:#B8B8B8; --gray-200:#E1E1E1; --gray-100:#F5F5F5;
      --success:#00C851;
      --safe-top:env(safe-area-inset-top); --safe-bottom:env(safe-area-inset-bottom);
      --spring:cubic-bezier(0.175,0.885,0.32,1.275); --ease-out:cubic-bezier(0.215,0.61,0.355,1);
    }

    *{margin:0;padding:0;box-sizing:border-box;-webkit-tap-highlight-color:transparent;user-select:none}
    html{font-size:16px;-webkit-text-size-adjust:100%;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}
    body{font-family:-apple-system,BlinkMacSystemFont,"SF Pro Display","Segoe UI",Roboto,Helvetica,Arial,sans-serif;background:#fff;color:var(--gray-900);line-height:1.5;overflow:hidden;position:fixed;width:100%;height:100%}

    .app{position:relative;width:100%;height:100%;display:flex;flex-direction:column;background:#fff}
    .status-bar{position:fixed;top:0;left:0;right:0;height:var(--safe-top);background:rgba(255,255,255,.9);backdrop-filter:blur(20px);-webkit-backdrop-filter:blur(20px);z-index:1000}
    .nav-bar{position:relative;display:flex;align-items:center;justify-content:space-between;padding:12px 20px;padding-top:calc(12px + var(--safe-top));background:rgba(255,255,255,.9);border-bottom:.5px solid rgba(0,0,0,.1);z-index:100;backdrop-filter:blur(20px);-webkit-backdrop-filter:blur(20px)}
    .nav-back{width:40px;height:40px;display:flex;align-items:center;justify-content:center;background:var(--orange-100);border-radius:20px;cursor:pointer;transition:all .2s var(--ease-out);position:relative;overflow:hidden}
    .nav-back::before{content:'';position:absolute;inset:0;background:var(--orange);opacity:0;transition:opacity .2s}
    .nav-back:active::before{opacity:.1}
    .nav-back svg{width:24px;height:24px;stroke:var(--orange);stroke-width:2.5;position:relative;z-index:1}
    .nav-back.hidden{opacity:.1;pointer-events:none;transform:scale(.8)}
    .nav-title{font-size:17px;font-weight:600;letter-spacing:-.02em;color:var(--gray-900);position:fixed;left:0%;transform:translateX(50%)}
    .nav-logo{height:40px;width:auto}

    .content{flex:1;overflow-y:auto;overflow-x:hidden;-webkit-overflow-scrolling:touch;padding:20px;padding-bottom:calc(20px + var(--safe-bottom) + 100px);background:#fff}
    .step-card{background:#fff;border-radius:24px;padding:32px 24px;box-shadow:0 2px 20px rgba(0,0,0,.06);animation:slideUp .5s var(--spring) both;transform-origin:center bottom;max-width:520px;margin:0 auto}
    @keyframes slideUp{from{opacity:0;transform:translateY(40px) scale(.95)}to{opacity:1;transform:translateY(0) scale(1)}}

    .step-pills{display:flex;justify-content:center;gap:6px;margin-bottom:24px}
    .step-pill{width:8px;height:8px;border-radius:4px;background:var(--gray-200);transition:all .3s var(--ease-out)}
    .step-pill.active{width:24px;background:var(--orange)}

    .step-title{font-size:24px;font-weight:800;line-height:1.2;letter-spacing:-.03em;text-align:center;margin-bottom:12px}
    .step-subtitle{font-size:17px;line-height:1.4;color:var(--gray-600);text-align:center;margin-bottom:20px}

    .illustration{width:100%;min-height:180px;display:flex;align-items:center;justify-content:center;margin:20px 0;position:relative}
    .illustration img{max-width:100%;max-height:280px;object-fit:contain;border-radius:16px;box-shadow:0 10px 30px rgba(0,0,0,.06)}
    .placeholder-frame{width:100%;max-width:520px;min-height:180px;border:2px dashed var(--gray-200);border-radius:16px;display:flex;align-items:center;justify-content:center;gap:12px;background:#fff}
    .placeholder-frame .ph{font-size:38px;color:var(--orange)}
    .placeholder-caption{font-size:15px;color:var(--gray-600)}
    .placeholder-badge{font-size:12px;font-weight:700;color:#fff;background:var(--orange);padding:4px 8px;border-radius:999px}

    .hint{background:var(--gray-100);border-radius:16px;padding:16px 16px;margin:14px 0;color:var(--gray-700);font-size:15px}
    .kbd{display:inline-block;padding:2px 8px;border-radius:8px;background:#fff;border:1px solid var(--gray-200);font-weight:700}

    .button-stack{display:flex;flex-direction:column;gap:12px;margin-top:26px}
    .btn{position:relative;display:flex;align-items:center;justify-content:center;min-height:56px;padding:16px 24px;border:none;border-radius:16px;font-size:17px;font-weight:700;letter-spacing:-.02em;cursor:pointer;transition:all .2s var(--ease-out);overflow:hidden}
    .btn::before{content:'';position:absolute;inset:0;background:radial-gradient(circle at var(--x,50%) var(--y,50%),rgba(255,255,255,.3),transparent);opacity:0;transform:scale(0);transition:all .4s}
    .btn:active::before{opacity:1;transform:scale(2)}
    .btn-primary{background:var(--orange);color:#fff;box-shadow:0 4px 20px rgba(247,148,29,.25)}
    .btn-secondary{background:var(--gray-100);color:#111}
    .btn-success{background:var(--success);color:#fff}

    .bottom-action{position:fixed;bottom:0;left:0;right:0;padding:20px;padding-bottom:calc(20px + var(--safe-bottom));background:linear-gradient(to top,#fff 60%,transparent);pointer-events:none;z-index:90}
    .bottom-action>*{pointer-events:auto}
    .progress-indicator{display:flex;align-items:center;justify-content:space-between;margin-bottom:12px;max-width:520px;margin-left:auto;margin-right:auto}
    .progress-text{font-size:14px;font-weight:700;color:var(--orange)}
    .progress-bar{flex:1;height:4px;background:var(--gray-200);border-radius:2px;margin:0 16px;overflow:hidden}
    .progress-fill{height:100%;background:linear-gradient(90deg,var(--orange),#FFA94D);border-radius:2px;transition:width .6s var(--spring);position:relative}

    @media (prefers-color-scheme: dark){
      body,.app,.content{background:#fff;color:#111}
      .nav-bar,.status-bar{background:rgba(255,255,255,.9)}
    }
  </style>
</head>
<body>
  <div class="app">
    <div class="status-bar"></div>

    <nav class="nav-bar">
      <div class="nav-back hidden" id="backBtn" role="button" aria-label="Go back">
        <svg viewBox="0 0 24 24" fill="none"><path d="M15 18l-6-6 6-6" stroke="currentColor"/></svg>
      </div>
      <h1 class="nav-title">Support</h1>
      <img src="https://i.imgur.com/fDv6d8s.png" alt="BFA Digital" class="nav-logo" />
    </nav>

    <main class="content" id="content">
      <div class="step-card" id="stepCard"></div>
    </main>

    <div class="bottom-action" id="bottomAction"></div>
  </div>

  <script>
    /* ==================================
       ASSETS ‚Äî add your images later
       ================================== */
    const ASSETS = {
      // 2) Real Samsung TV / Remote showing the Home button
      remoteOrTvPhoto: "https://media4.giphy.com/media/v1.Y2lkPTc5MGI3NjExNDR2azhyZDNpOTh4ZXJoamM0Z2U2Z3Nhbzd0eTlqOWtrcGozdGZxMiZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/5HB2hB9U4OnOo/giphy.gif",

      // 3) Real Samsung Home screen (Smart Hub)
      realHomeScreen: "https://media4.giphy.com/media/v1.Y2lkPTc5MGI3NjExNDR2azhyZDNpOTh4ZXJoamM0Z2U2Z3Nhbzd0eTlqOWtrcGozdGZxMiZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/5HB2hB9U4OnOo/giphy.gif",

      // 5) URL Launcher tile picture
      urlLauncherImage: "https://media0.giphy.com/media/v1.Y2lkPTc5MGI3NjExZ2VhZTVpbmQ1cXlpZHppc21kdWx0ODJnczdvYTV0Z2V3N2cwcGNybCZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/NCriq44MItnwtGtRVe/giphy.gif",
      
      // 5) network check
      networkcheckImage: "https://media2.giphy.com/media/v1.Y2lkPTc5MGI3NjExdXlsa2FxM2prNHc0a3hkcWMycmUxMmJ2cjNxd2t0dXUydzdnZ3BwYSZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/14deI71kZ4SuJhuKCL/giphy.gif",

      // 5) Signagelive tile/logo
      signageliveImage: "https://media3.giphy.com/media/v1.Y2lkPTc5MGI3NjExM20wdHUwd2Y3c3BtejRsaDhteXBuYWozbjYxcW9oemt0aXVjMmJ1ayZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/wXxgFvCOfUUWS1Za8b/giphy.gif",

     
      // Optional success photo (content playing)
     wifi: "https://media.lordicon.com/icons/wired/outline/745-wifi-connection.gif",
      
      
      remote: "https://media3.giphy.com/media/v1.Y2lkPTc5MGI3NjExNjdiMGx2MmdmeDUweW9waGJkMHZpYmYwbHhvMnB0NWRmbmcycXN2dyZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9cw/jOzYNZDuzDayWH4X2v/giphy.gif",
      
      
      // Optional success photo (content playing)
      successRealPhoto: "https://cdn.dribbble.com/users/954572/screenshots/20225943/media/4a8c0bf9dc44f38066221e6710701a78.gif"
    };

    /* Haptics */
    const haptic = {
      light: () => navigator.vibrate && navigator.vibrate(10),
      medium: () => navigator.vibrate && navigator.vibrate(20),
      success: () => navigator.vibrate && navigator.vibrate([10,10,10]),
    };

    document.addEventListener('touchstart', (e) => {
      if (e.target.classList.contains('btn')) {
        const r = e.target.getBoundingClientRect();
        const x = ((e.touches[0].clientX - r.left) / r.width) * 100;
        const y = ((e.touches[0].clientY - r.top) / r.height) * 100;
        e.target.style.setProperty('--x', x + '%');
        e.target.style.setProperty('--y', y + '%');
      }
    });

    /* ==============
       Steps / Copy
       ============== */
    const steps = [
      {
        id: 'welcome',
        type: 'intro',
        content: {
          title: 'Samsung TV Signage',
          subtitle: 'Quick check to make sure your screen is live and playing.',
          image: ASSETS.successRealPhoto, // optional
          placeholderLabel: 'Add a real ‚Äúscreen playing‚Äù photo (optional)',
          buttons: [{ text: 'Start', goto: 'Wifi', style: 'primary' }]
        }
      },
      {
        id: 'Wifi',
        type: 'action',
        content: {
          title: 'Was your internet changed?',
          image: ASSETS.wifi,
          instruction:
           '', 
          icon: 'ph-broadcast',
          buttons: [
            { text: 'Yes ‚Äî Changed', goto: 'contact', style: 'secondary' },
            { text: 'No ‚Äî No changes', goto: 'find-remote', style: 'primary' }
          ]
        }
      },
      {
        id: 'find-remote',
        type: 'action',
        content: {
          title: 'Find TV remote',
          subtitle: 'Press source buttom',
          image: ASSETS.remote,
          placeholderLabel: 'Real photo of Samsung remote/TV showing the Home button',
          instruction:
`Do you see anything?`,
          icon: 'ph-television',
          buttons: [
            { text: 'Yes ', goto: 'internet-change', style: 'primary' },
            { text: 'No ', goto: 'cold-restart', style: 'secondary' }
          ]
        }
      },
      {
        id: 'internet-change',
        type: 'action',
        content: {
          title: 'Check internet connection?',
          subtitle: '‚Äî Using the remote ‚Äî Open the TV Home (Smart Hub) check connectivity.',
          image: ASSETS.networkcheckImage,
          placeholderLabel: 'Real photo of Samsung remote/TV showing the Home button',
          instruction:
`1) Press the Home button on the Samsung remote
2) You should now see the Samsung Home (Smart Hub)
3) Now look for connected as shown above`,
          icon: 'ph-television',
          buttons: [
            { text: 'Yes - Connected', goto: 'tv-power', style: 'primary' },
            { text: 'No - Not connected', goto: 'live-check', style: 'secondary' }
          ]
        }
      },
      {
        id: 'tv-power',
        type: 'action',
        content: {
          title: 'Samsung TV ‚Äî use the Home button',
          subtitle: 'Open the TV Home (Smart Hub) to access the signage app.',
          image: ASSETS.signageliveImage,
          placeholderLabel: 'Real photo of Samsung remote/TV showing the Home button',
          instruction:
`1) Press the Home button on the Samsung remote
2) If the TV was off, turn it on first
3) You should now see the Samsung Home (Smart Hub)
4) Now click on the SL(Signagelive) logo`,
          icon: 'ph-television',
          buttons: [
            { text: 'Yes ‚Äî it‚Äôs live', goto: 'success', style: 'primary' },
            { text: 'No - not playing', goto: 'cold-restart', style: 'secondary' }
          ]
        }
      },
      
      
      {
        id: 'live-check',
        type: 'action',
        content: {
          title: 'Connect to the internet',
          image: ASSETS.urlLauncherImage,
          instruction:
`1) Press the MENU button on the Samsung remote
2) Network
3) Open Network Settings
4) Choose Wirreless (if you are using wifi)
5) Find your Wifi and password`,
          icon: 'ph-broadcast',
          buttons: [
            { text: 'Yes ‚Äî it‚Äôs connected', goto: 'tv-power', style: 'secondary' },
            { text: 'No ‚Äî not playing', goto: 'cold-restart', style: 'primary' }
          ]
        }
      },
      
      {
        id: 'home-screen',
        type: 'question',
        content: {
          title: 'This is the Home screen (Smart Hub)',
          subtitle: 'It shows app tiles like URL Launcher / Signagelive.',
          image: ASSETS.realHomeScreen,
          placeholderLabel: 'Real photo/screenshot of the Samsung Home (Smart Hub)',
          icon: 'ph-house',
          buttons: [
            { text: 'Yes ‚Äî I‚Äôm on Home', goto: 'launch-app', style: 'primary' },
            { text: 'No ‚Äî not here', goto: 'cold-restart', style: 'secondary' }
          ]
        }
      },
      {
        id: 'cold-restart',
        type: 'action',
        content: {
          title: 'Quick restart',
          subtitle: 'This refreshes the built-in player.',
          instruction:
`‚Äî Unplug from the wall or back of the TV:
1) Unplug the TV 
2) Wait 60 seconds
3) Plug it back in and wait up to 5 minutes
`,
          icon: 'ph-plug',
          buttons: [
            { text: 'Done ‚Äî continue', goto: 'live-check', style: 'primary' },
            { text: 'Need help', goto: 'contact', style: 'secondary' }
          ]
        }
      },
      {
        id: 'launch-app',
        type: 'action',
        content: {
          title: 'Open the signage app',
          subtitle: 'From the Home screen:',
          imageSet: [
            { src: ASSETS.urlLauncherImage, alt: 'URL Launcher tile', placeholder: 'Add a picture of the URL Launcher tile' },
            { src: ASSETS.signageliveImage, alt: 'Signagelive tile', placeholder: 'Add a picture of the Signagelive tile/logo' }
          ],
          icon: 'ph-globe',
          instruction:
`1) With the remote, look for URL Launcher or Signagelive
2) Select it to launch
3) Wait up to 2 minutes for content to start`,
          buttons: [
            { text: 'Content is playing üëç', goto: 'success', style: 'success' },
            { text: 'Still not playing', goto: 'wait-content', style: 'secondary' }
          ]
        }
      },
      {
        id: 'wait-content',
        type: 'static-action',
        content: {
          title: 'Give it a moment',
          subtitle: 'The screen may be downloading updates. Wait up to 5 minutes.',
          icon: 'ph-hourglass',
          showLoading: true,
          buttons: [
            { text: 'It‚Äôs working now!', goto: 'success', style: 'success' },
            { text: 'Still nothing after 5 min', goto: 'contact', style: 'primary' }
          ]
        }
      },
      {
        id: 'contact',
        type: 'contact',
        content: {
          title: 'We‚Äôll take it from here',
          subtitle: 'Our support team can finish this quickly with you.',
          phone: '(647) 209-0519',
          note: 'Ask for the Digital support team',
          icon: 'ph-phone-call',
          buttons: [ { text: 'Start Over', action: 'restart', style: 'primary' } ]
        }
      },
      {
        id: 'success',
        type: 'success',
        content: {
          title: 'All set! üéâ',
          subtitle: 'Your screen is live and content should be playing.',
          image: ASSETS.successRealPhoto,
          placeholderLabel: 'Optional photo of the screen playing your content',
          icon: 'ph-check-circle',
          buttons: [ { text: 'Troubleshoot Again', action: 'restart', style: 'primary' } ]
        }
      }
    ];

    /* ========= Helpers ========= */
    function placeholder(label, icon = 'ph-image-square'){
      return `
        <div class="placeholder-frame">
          <i class="ph ${icon}"></i>
          <div>
            <div class="placeholder-badge">Add Image Later</div>
            <div class="placeholder-caption" style="margin-top:6px">${label}</div>
          </div>
        </div>
      `;
    }

    function imageOrPlaceholder(src, alt, label, icon){
      if (src) return `<img src="${src}" alt="${alt || ''}" />`;
      return placeholder(label, icon);
    }

    /* ============ App ============ */
    const app = {
      currentStep: 0,
      history: [],
      stepMap: new Map(steps.map((s,i)=>[s.id,i])),
      interactiveTypes: new Set(['question','action','static-action','wait']),

      init(){ this.bind(); this.render(); },
      bind(){
        document.getElementById('backBtn').addEventListener('click', ()=> this.goBack());
        let startX = 0;
        document.addEventListener('touchstart',e=>{ startX = e.touches[0].clientX; });
        document.addEventListener('touchend',e=>{
          const diff = e.changedTouches[0].clientX - startX;
          if (diff > 80 && this.history.length) this.goBack();
        });
      },

      render(){
        const step = steps[this.currentStep];
        const card = document.getElementById('stepCard');
        const bottom = document.getElementById('bottomAction');
        const backBtn = document.getElementById('backBtn');

        backBtn.classList.toggle('hidden', this.history.length === 0);
        card.innerHTML = ''; bottom.innerHTML = '';
        card.style.animation = 'none'; requestAnimationFrame(()=> card.style.animation = '');

        switch(step.type){
          case 'intro': this.renderIntro(step, card, bottom); break;
          case 'question':
          case 'action':
          case 'static-action': this.renderQuestion(step, card, bottom); break;
          case 'contact': this.renderContact(step, card, bottom); break;
          case 'success': this.renderSuccess(step, card, bottom); break;
        }
        this.updateTitle(step);
      },

      renderIntro(step, card, bottom){
        const media = step.content.image
          ? `<div class="illustration"><img src="${step.content.image}" alt="Samsung signage"></div>`
          : `<div class="illustration">${placeholder(step.content.placeholderLabel || 'Hero image (optional)','ph-image-square')}</div>`;
        card.innerHTML = `
          <h2 class="step-title">${step.content.title}</h2>
          <p class="step-subtitle">${step.content.subtitle}</p>
          ${media}
        `;
        this.renderButtons(step.content.buttons, bottom);
      },

      renderQuestion(step, card, bottom){
        let media = '';
        if (Array.isArray(step.content.imageSet) && step.content.imageSet.length){
          media = `<div class="illustration">
            <div style="display:grid;grid-template-columns:1fr 1fr;gap:12px;width:100%;max-width:520px;">
              ${step.content.imageSet.map(item => {
                if (item.src) return `<img src="${item.src}" alt="${item.alt || ''}" />`;
                return placeholder(item.placeholder || 'Add app tile/logo photo', 'ph-app-window');
              }).join('')}
            </div>
          </div>`;
        } else if (step.content.image || step.content.placeholderLabel){
          media = `<div class="illustration">${
            step.content.image
              ? `<img src="${step.content.image}" alt="">`
              : placeholder(step.content.placeholderLabel || 'Add a photo', step.content.icon || 'ph-image-square')
          }</div>`;
        } else {
          media = `<div class="illustration"><i class="ph ${step.content.icon || 'ph-image-square'}" style="font-size:110px;color:var(--orange)"></i></div>`;
        }

        card.innerHTML = `
          ${this.renderPills()}
          <h2 class="step-title">${step.content.title}</h2>
          <p class="step-subtitle">${step.content.subtitle || ''}</p>
          ${media}
          ${step.content.instruction ? `<div class="hint"><pre style="white-space:pre-wrap;font-family:inherit">${step.content.instruction}</pre></div>` : ''}
          ${step.content.showLoading ? this.renderLoading() : ''}
        `;
        this.renderButtons(step.content.buttons, bottom);
      },

      renderContact(step, card, bottom){
        card.innerHTML = `
          <h2 class="step-title">${step.content.title}</h2>
          <p class="step-subtitle">${step.content.subtitle}</p>
          <div class="illustration"><i class="ph ${step.content.icon || 'ph-phone-call'}" style="font-size:110px;color:var(--orange)"></i></div>
          <a href="tel:+16472090519" class="btn btn-secondary" style="width:100%;text-decoration:none;text-align:center" onclick="haptic.medium()">üìû ${step.content.phone}</a>
          <p style="text-align:center;color:var(--gray-500);font-size:15px;margin-top:12px;">${step.content.note}</p>
        `;
        this.renderButtons(step.content.buttons, bottom);
      },

      renderSuccess(step, card, bottom){
        const media = step.content.image
          ? `<div class="illustration"><img src="${step.content.image}" alt="Screen playing"></div>`
          : `<div class="illustration">${placeholder(step.content.placeholderLabel || 'Optional success photo','ph-check-circle')}</div>`;
        card.innerHTML = `
          ${media}
          <h2 class="step-title">${step.content.title}</h2>
          <p class="step-subtitle">${step.content.subtitle}</p>
        `;
        this.renderButtons(step.content.buttons, bottom);
        haptic.success();
      },

      renderButtons(buttons, container){
        const html = buttons.map(btn => `
          <button class="btn btn-${btn.style || 'primary'}"
                  onclick="app.handle('${btn.action || 'goto'}','${btn.goto || ''}')"
                  ontouchstart="haptic.light()">${btn.text}</button>`).join('');
        container.innerHTML = `
          ${this.shouldShowProgress() ? this.renderProgress() : ''}
          <div class="button-stack">${html}</div>
        `;
      },

      renderPills(){
        const order = steps.filter(s=>this.interactiveTypes.has(s.type));
        const idx = Math.max(0, order.indexOf(steps[this.currentStep]));
        let pills = '<div class="step-pills">';
        for (let i=0;i<order.length;i++){ pills += `<div class="step-pill ${i===idx?'active':''}"></div>`; }
        pills += '</div>';
        return pills;
      },

      renderProgress(){
        const order = steps.filter(s=>this.interactiveTypes.has(s.type));
        const idx = Math.max(0, order.indexOf(steps[this.currentStep]));
        const total = order.length;
        const pct = (idx / Math.max(1,total-1)) * 100;
        return `
          <div class="progress-indicator">
            <span class="progress-text">Step ${Math.min(idx+1,total)} of ${total}</span>
            <div class="progress-bar"><div class="progress-fill" style="width:${pct}%"></div></div>
          </div>
        `;
      },

      renderLoading(){
        return `
          <div style="display:flex;justify-content:center;gap:8px;padding:18px">
            <div class="loading-dot" style="width:12px;height:12px;background:var(--orange);border-radius:50%;animation:ld 1.2s ease-in-out infinite"></div>
            <div class="loading-dot" style="width:12px;height:12px;background:var(--orange);border-radius:50%;animation:ld 1.2s ease-in-out .15s infinite"></div>
            <div class="loading-dot" style="width:12px;height:12px;background:var(--orange);border-radius:50%;animation:ld 1.2s ease-in-out .3s infinite"></div>
          </div>
          <style>@keyframes ld{0%,80%,100%{transform:translateY(0)}40%{transform:translateY(-8px)}}</style>
        `;
      },

      shouldShowProgress(){
        const step = steps[this.currentStep];
        return this.interactiveTypes.has(step.type);
      },

      updateTitle(step){
        const navTitle = document.querySelector('.nav-title');
        if (step.type === 'intro') navTitle.textContent = 'Support';
        else if (step.type === 'success') navTitle.textContent = 'Complete';
        else navTitle.textContent = 'Troubleshooting';
      },

      handle(action,target){
        if (action === 'next') this.go(this.currentStep + 1);
        else if (action === 'goto' && target){
          const i = this.stepMap.get(target);
          if (i !== undefined) this.go(i);
        } else if (action === 'restart'){
          this.history = []; this.go(0);
        }
      },

      go(i){
        if (i>=0 && i<steps.length){
          if (this.currentStep !== i) this.history.push(this.currentStep);
          this.currentStep = i; this.render();
          document.getElementById('content').scrollTo({ top:0, behavior:'smooth' });
        }
      },

      goBack(){
        if (this.history.length){
          haptic.light();
          this.currentStep = this.history.pop();
          this.render();
          const backBtn = document.getElementById('backBtn');
          backBtn.classList.add('haptic');
          setTimeout(()=> backBtn.classList.remove('haptic'), 100);
        }
      }
    };

    // Init
    app.init();

    // Prevent pull-to-refresh on iOS
    let lastY = 0;
    document.addEventListener('touchstart', e => { lastY = e.touches[0].clientY; });
    document.addEventListener('touchmove', e => {
      const y = e.touches[0].clientY;
      const scrollTop = document.getElementById('content').scrollTop;
      if (scrollTop === 0 && y > lastY) e.preventDefault();
    }, { passive:false });
  </script>
</body>
</html>
